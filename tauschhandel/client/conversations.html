<template name="conversations">
	{{#contentFor "headerTitle"}}
		<h1 class="title">Konversationen</h1>
	{{/contentFor}}

	{{#contentFor "headerButtonRight"}}
		<a href="/profile" class="button button-clear pull-right" >
			Profil
		</a>
	{{/contentFor}}
	{{#ionView}}
		{{#ionContent}}
			{{#ionList}}
				{{#if moreThanZero}}
					{{#each konversationen}}
						{{> conversationListItem}}
					{{/each}}
				{{else}}
					{{> nothingHere}}
				{{/if}}
			{{/ionList}}
		{{/ionContent}}
	{{/ionView}}
</template>

<template name="conversationListItem">
	{{#ionItem path="conversation" avatar=true iconRight=true class="item-icon-right conversation" }}
	 	<img src=" {{#if other.profile.picture}} {{other.profile.picture}} {{else}} http://i.imgur.com/hzByj22b.jpg {{/if}} " height="50">
		<h2>{{other.username}}</h2> 
		<p>Übergabe von {{post.title}}</p>
		{{#if moreThanZero}}
			<span class="badge badge-assertive">{{badgeCount}}</span>
		{{else}}
			{{> ionIcon icon="ios-arrow-forward" class="positive"}}
		{{/if}}
	{{/ionItem}}
</template>

<template name="conversation">
	{{#contentFor "headerButtonLeft"}}
		{{>ionNavBackButton path="conversations" text="Konversationen"}}
	{{/contentFor}}
	{{#ionView}}
		{{#ionContent}}
			<div class="list">
				{{#each conversation.messages}}
					{{#if fromMe}}
						<div class="item item-text-wrap" style="background-color: #158ffe; border-radius: 5px; margin: 10px 10px 10px {{margin}}%">
							<p style="color: white; font-size: 17px">{{{message}}}</p>
						</div>
					{{else}}
						<div class="item item-text-wrap " style="background-color: #EEE; border-radius: 5px; margin: 10px {{margin}}% 10px 10px">
							<p style="font-size: 17px">{{{message}}}</p>
						</div>
					{{/if}}
				{{/each}}


				<div class="item item-input-inset">
					<label class="item-input-wrapper">
						<textarea id="message" type="text" placeholder="Type.." rows="4" style="background-color: #EEE"></textarea>
					</label>
					<button id="writeMessageButton" class="button button-small">
						Send
					</button>
				</div>
			</div>
		{{/ionContent}}

	{{/ionView}}
</template>

<template name="nothingHere">
	<div class="padding">
		<h3> Hier gibts noch nix zu sehn gälle </h3>
		<p> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
		tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
		quis nostrud exercitation ullamco. </p>
	</div>
</template>
